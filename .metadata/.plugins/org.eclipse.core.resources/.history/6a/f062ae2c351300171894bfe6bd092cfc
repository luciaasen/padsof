
package moon;

import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;

import moon.*;


/**
 * @author Lucia Asencio and Juan Riera
 * This class shows the normal functionality of the app
 *
 */
public class Demonstrator {
	/**
	 * This main will load some users, make a teacher login and create some courses with units and exercises, and then students will sequentally log in and do the exercises
	 */
	public static void main(String args[]){
		System.out.println("Hi");
		/*Load users*/
		Academy moon = Academy.getMoonApp();
		try { moon.loadUsers("StudentData.txt"); }
		catch (NumberFormatException | IOException e){
			e.printStackTrace();
		}
		
		serialize(moon);
		
		moon = deserialize();
		
		Academy.setMoon(moon);
		
	}
	/**
	 * Auxiliar method to serialize moon.
	 * @param moon
	 * @throws IOException
	 */
	public static void serialize(Academy moon) {
		try {
		FileOutputStream fileOut =
				new FileOutputStream("moon.ser");
		ObjectOutputStream out = 
				new ObjectOutputStream(fileOut);
		out.writeObject(moon);
		out.close();
		fileOut.close();
		} catch (IOException e){
			e.printStackTrace();
		}
	}
	
	/**
	 * Auxiliar method to deserialize moon.
	 * @return
	 */
	public static Academy deserialize(){
		Academy moon;
		try{
			FileInputStream fileIn =
					new FileInputStream("moon.ser");
			ObjectInputStream in =
					new ObjectInputStream(fileIn);
			moon = (Academy) in.readObject();
			in.close();
			fileIn.close();
		} catch (Exception e){
			e.printStackTrace();
			return null;
		}
		return moon;
	}

	

}
