package p5;

import java.util.*;

public class Task {
	
	public static Task Tasks = new Task();
	
	private TreeMap<String,Task> subtasks = new TreeMap();	
	private String name;
	private Task parent;
	
	public String getName(){
		return this.name;
	}
	
	/**
	 * If possible, adds t to this subtasks (and sets t parent as this)
	 * If already contained in this, returns false
	 * @param t task to add
	 * @return true if correctly added, false else
	 * @throws IllegalArgumentException when t already contained in this ancestors
	 */
	public boolean addTask(Task t) throws IllegalArgumentException{
		if(this.containsTask(t)) return false;
		if(Task.Tasks.containsTask(t)) throw new IllegalArgumentException();
		this.subtasks.put(t.name, t);
		t.parent = this;
		return true;
	}
	
	public boolean removeTask(Task t){
		if (this.containsTask(t)){
			Task parent = t.parent;
		}
	}
	
	public Set<Task> getTasks(){
		
	}
	public boolean containsTask(Task t){
		if(this.subtasks.isEmpty()) return true;
		for(Task subt: this.subtasks.values()){
			if(subt.containsTask(t)) return true;
		}
		return false;
	}
	
	public Task getParent();
	public void setParent(Task parent);
	public AdjustableTime getEstimated();
	public AdjustableTime getDedicated();

	@Override
	public boolean equals(Object o){
		if(o == null) return false;
		if(!(o instanceof Task)) return false;
		Task t = (Task)o;
		if(!t.name.equals(this.name)) return false;
		return true;		
	}
	
	@Override
	public int hashCode(){
		return this.hashCode();
	}
	
	@Override
	public String toString(){
		return this.name;
	}
	
}
